# MEAS analysis

In this folder we will find the analyses files and notebooks for different MEAs experiments. 

There are two main types of experiments:
* Comparison experimentos (aka COMPARISON), where the recordings between several components are compared. For instance, the firing before and after a specific treatment.
* Laser experiments (aka LASER), where the samples are radiated with a laser, and the ON-OFF contidions are compared, or the firing responsive to the laser is analyzed.

The directory structure is the following:
```
data/
    NAME1_DATA1_OPTIONAL/
        COMPARISON/
            raw/
                CONDITION_1.raw
                CONDITION_2.raw
                CONDITION_1/
                    ..._voltageRaw.txt.gz
                    CONDITION_1.info
                CONDITION_2/
                    ..._voltageRaw.txt.gz
                    CONDITION_2.info
        LASER/
            raw/
                CONDITION_1_WELL1.raw
                CONDITION_1_WELL2.raw
            exp_start/
                CONDITION_1.csv
            laser_on_off/
                CONDITION_1_WELL1.csv
                CONDITION_1_WELL2.csv
            spike_list/
                CONDITION_1_WELL1_spike_list.csv
                CONDITION_1_WELL2_spike_list.csv
        README

intermediate_files/
    NAME1_DATA1_OPTIONAL/
        df_peaks[...].csv

notebooks/
    generic_notebooks/
    NAME1_DATA1_OPTIONAL/
        COMPARISON/
            *.ipynb
        LASER/
            *.ipynb

results/
    NAME1_DATA1_OPTIONAL/

src/
    laser_controler/
        XXX.ipynb
    matlab_scripts/

README.md
.gitconfig
```

For each experiment, the structure is NAME_DATA_OPTIONAL. Optional can be used when two experiments are performed in the same date, or if an aclaratory input is necessary.

`data` folder contains al raw files that are necessary for the experiment, and are not generated by any notebok.
* `COMPARISON/raw` contains .raw files from the MEAs (optionally) and the .txt files obtained from the MATLAB code that are used to process the raw files. Each txt contains all the recording voltages. Each `CONDITION_1.raw` file will contain a `CONDITION_1` folder with as many `.txt` files as wells + electrodes are recorded. Additionally, a `CONDITION_1.info` file is stored with some information (duration, voltage correction factor, etc.) that is necessary for the preprocessing of these files to generate a peak dataframe. 
* `LASER/raw` Raw files that are specific for the LASER are usually segretated for different wells, this is necessary to obtain certain files.
* `LASER/exp_start` contains a csv file with different start times provided by a Matlab script and present in the `LASER/raw` files.
* `LASER/laser_on_off` is an "intermediate" file that is generated using notebooks from `src/laser_controler`. This file contains information about when the laser was turned on and off, and repetition and power of the laser.  
* `LASER/spike_list` is a file automatically generated from the MEAs, which contains the information of the spikes. This file is similar to the `intermediate_files/*/df_peaks.csv` file, but in the latter one the peak detection is customized, whereas in the `spike_list` this information cannot be controled.
* Each experiment should contain a `README` file that explains the procedure of the samples and hoe the samples were processed, and which are the different conditions.

`intermediate_files` folder contains files that are the output of a preprocessing from the notebooks, but which do not constitute a result per se. This files are generally used to the create a result.

`notebooks` folder contains all the notebooks used to process raw and intermediate files, to generate the results. The `generic_notebooks` folder contains some notebooks that may serve as a reference to copy to individual projects. Technically, this folder should be removed at some point.

`results` folder contains all the results, mainly in tables and figures.

`src` folder contains source code to preprocess `.raw` files into other files in the `data`folder.





